{% extends 'layout.html' %}
{% block content %}
<div class="category-page">
  <h1>Fitness</h1>
  <p>Access fitness routines and tips to enhance your basketball performance.</p>
</div>

<div class="drill-card" data-drill-id="fitness-drill-1">
  <h2>Drill Title 1</h2>
  <p>Details about drill 1.</p>
  <button class="fav-btn" onclick="toggleFavorite('fitness-drill-1', this)"><span class="fav-icon">&#9734;</span> Favourite</button>
</div>

<div class="drill-card" data-drill-id="fitness-drill-2">
  <h2>Drill Title 2</h2>
  <p>Details about drill 2.</p>
  <button class="fav-btn" onclick="toggleFavorite('fitness-drill-2', this)"><span class="fav-icon">&#9734;</span> Favourite</button>
</div>

<div class="drill-card" data-drill-id="fitness-drill-3">
  <h2>Drill Title 3</h2>
  <p>Details about drill 3.</p>
  <button class="fav-btn" onclick="toggleFavorite('fitness-drill-3', this)"><span class="fav-icon">&#9734;</span> Favourite</button>
</div>

<script>
function getFavorites() {
  return JSON.parse(localStorage.getItem('favorites') || '[]');
}
function setFavorites(favs) {
  localStorage.setItem('favorites', JSON.stringify(favs));
}
function toggleFavorite(id, btn) {
  let favs = getFavorites();
  const isFav = favs.includes(id);
  if (isFav) {
    favs = favs.filter(f => f !== id);
    btn.innerHTML = '<span class="fav-icon">&#9734;</span> Favourite';
  } else {
    favs.push(id);
    btn.innerHTML = '<span class="fav-icon">&#9733;</span> Unfavourite';
  }
  setFavorites(favs);
  updateAllButtons();
}
function updateAllButtons() {
  const favs = getFavorites();
  document.querySelectorAll('.drill-card').forEach(card => {
    const id = card.getAttribute('data-drill-id');
    const btn = card.querySelector('.fav-btn');
    if (!btn) return;
    if (favs.includes(id)) {
      btn.innerHTML = '<span class="fav-icon">&#9733;</span> Unfavourite';
    } else {
      btn.innerHTML = '<span class="fav-icon">&#9734;</span> Favourite';
    }
  });
}
document.addEventListener('DOMContentLoaded', updateAllButtons);
</script>

<style>
  .fav-btn {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 1.2em;
    padding: 0;
  }

  .fav-icon {
    color: gold;
  }

  .favorited .fav-icon {
    color: red;
  }
</style>
{% endblock %}
